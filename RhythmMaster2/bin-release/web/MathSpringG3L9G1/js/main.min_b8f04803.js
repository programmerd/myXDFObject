var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},__awaiter=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,r){function o(e){try{u(n.next(e))}catch(t){r(t)}}function a(e){try{u(n["throw"](e))}catch(t){r(t)}}function u(e){e.done?s(e.value):new i(function(t){t(e.value)}).then(o,a)}u((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(s)throw new TypeError("Generator is already executing.");for(;u;)try{if(s=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(n){i=[6,n],r=0}finally{s=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var s,r,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var s=RES.getRes(e);s?n(s):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Index=function(e){function t(){var t=e.call(this)||this;return t.subNum=new Value(0),t.isPlayMusic=!1,t.isPlayAnimate=[],t.resultEnabled=[[2,8,13,16,18],[17]],t.resultArr=[[0,2,8,10,13,15,16,17,18],[0,17,18]],t.preinstallArr=[[6,1,0,1,3,7,9,3,0,7,8,1,3,0,1,3,0,0,0],[8,0,9,1,2,9,7,0,8,9,6,1,0,8,1,0,8,0,0]],t.isResultArr=[],t.jiezou1={dom:"animateGroup",dragonbonesData:"jiezou1_ske_json",textureData1:"jiezou1_tex_json",texture1:"jiezou1_tex_png",name:"jiezou1",count:1},t.jiezou2={dom:"animateGroup",dragonbonesData:"jiezou2_ske_json",textureData1:"jiezou2_tex_json",texture1:"jiezou2_tex_png",name:"jiezou2",count:1},t.jiezou3={dom:"animateGroup",dragonbonesData:"jiezou3_ske_json",textureData1:"jiezou3_tex_json",texture1:"jiezou3_tex_png",name:"jiezou3",count:1},t.jiezou4={dom:"animateGroup",dragonbonesData:"jiezou4_ske_json",textureData1:"jiezou4_tex_json",texture1:"jiezou4_tex_png",name:"jiezou4",count:1},t.jiezou5={dom:"animateGroup",dragonbonesData:"jiezou5_ske_json",textureData1:"jiezou5_tex_json",texture1:"jiezou5_tex_png",name:"jiezou5",count:1},t.jiezou6={dom:"animateGroup",dragonbonesData:"jiezou6_ske_json",textureData1:"jiezou6_tex_json",texture1:"jiezou6_tex_png",name:"jiezou6",count:1},t.changpian={dom:"changpianGroup",dragonbonesData:"changpian_ske_json",textureData1:"changpian_tex_json",texture1:"changpian_tex_png",name:"changpian",count:-1},t.isMusic=!0,t.tq_bj=RES.getRes("tq_bj_mp3"),t.success=RES.getRes("success_mp3"),t.error=RES.getRes("error_mp3"),t.bj=RES.getRes("bj_mp3"),t.music1=RES.getRes("music1_mp3"),t.music2=RES.getRes("music2_mp3"),t.tip=RES.getRes("tip_mp3"),t.skinName="IndexSkin",t}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.music.addEventListener(egret.TouchEvent.TOUCH_TAP,this.musicFun,this),this.reset.addEventListener(egret.TouchEvent.TOUCH_TAP,this.resetFun,this),this.subNum.addEventListener(Data.DATA,this.changNumber,this),this.subject.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.showSubject.visible=!0},this),this.showSubject.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.showSubject.visible=!1},this),this.labelGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enteringLabel,this),this.submit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.referFun,this),this.gameOver.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.isMusic=!0,t.musicFun(),t.start()},this),this.clickStart.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.endStart.visible=!1,t.start()},this)},t.prototype.start=function(){this.subNum.value=1,this.animationFun(this.changpian),this.music_bj=this.bj.play(0,-1),this.playMusic("tip"),this.gameOver.visible=!1},t.prototype.enteringLabel=function(e){if("group"!=e.target.name){this.clickLabel=e.target,this.index=this.labelGroup.$children.indexOf(e.target);e.target.x+e.target.parent.x-500,e.target.y+e.target.parent.y-200;this.addChild(new Keyset(this,350,500))}},t.prototype.judgeResult=function(){var e=this.preinstallArr[this.subNum.value-1];this.isResultArr[this.index]=this.resultNum,this.isSuccessFun(),this.resultNum==e[this.index]?(console.log("回答正确"),this.Highlight(this.keyingGroup.$children[this.index],!0),this.playMusic("success")):(console.log("回答错误"),this.Highlight(this.keyingGroup.$children[this.index],!1),this.playMusic("error"))},t.prototype.changNumber=function(){this.labelGroup.visible=!0,this.keyingGroup.visible=!0,this.showNumGroup.visible=!0;var e=this.labelGroup.$children,t=this.keyingGroup.$children,i=this.showNumGroup.$children;this.isResultArr=[];for(var n=0;n<this.labelGroup.$children.length;n++){var s=this.resultArr[this.subNum.value-1].indexOf(n),r=t[n].source.split("_");if(-1!=s){var o=this.preinstallArr[this.subNum.value-1];e[n].visible=!1,t[n].source=r[0]+"_d_"+r[r.length-2]+"_"+r[r.length-1],i[n].source=o[n]+"_png",this.isResultArr[n]=o[n]}else e[n].visible=!0,t[n].source=r[0]+"_"+r[r.length-2]+"_"+r[r.length-1],i[n].source="";t[n].visible=!0,i[n].visible=!0,t[n].filters=null}this.resultEnabled[this.subNum.value-1].map(function(n){e[n].visible=!1,t[n].visible=!1,i[n].visible=!1}),this.isSuccessFun()},t.prototype.isSuccessFun=function(){var e=this.preinstallArr[this.subNum.value-1];console.log(this.isResultArr),this.isResultArr.join("")==e.join("")?(console.log("正确"),this.submit.enabled=!0):(console.log("有误"),this.submit.enabled=!1)},t.prototype.referFun=function(){var e=this;this.isMusic=!0,this.musicFun(),this.labelGroup.visible=!1,this.keyingGroup.visible=!1,this.showNumGroup.visible=!1,this.submit.enabled=!1,this.isPlayAnimate=[],this.animationFun(this.jiezou1),this.animationFun(this.jiezou2),this.animationFun(this.jiezou3),this.animationFun(this.jiezou4),this.animationFun(this.jiezou5),this.animationFun(this.jiezou6),this.playMusic("music"+this.subNum.value).addEventListener(egret.Event.SOUND_COMPLETE,function(){e.isPlayMusic=!0},this),console.log("确认")},t.prototype.musicFun=function(){this.isMusic?(this.music_bj.stop(),this.isMusic=!1,this.music.source="music_close_png"):(this.music_bj=this.bj.play(0,-1),this.isMusic=!0,this.music.source="music_png")},t.prototype.resetFun=function(){window.location.reload()},t.prototype.playMusic=function(e,t){return void 0===t&&(t=1),this.racTipMusic&&this.racTipMusic.stop(),this.racTipMusic=this[e].play(0,t),this.racTipMusic},t.prototype.animationFun=function(e){var t=this;this[e.take]&&this[e.take].parent&&(e.dom?this[e.dom].removeChild(this[e.take]):this.removeChild(this[e.take]));var i=RES.getRes(e.dragonbonesData),n=RES.getRes(e.textureData1),s=RES.getRes(e.texture1),r=new dragonBones.EgretFactory;r.parseDragonBonesData(i),r.parseTextureAtlasData(n,s);var o=r.buildArmatureDisplay(e.name);return e.dom?this[e.dom].addChild(o):this.addChild(o),o.animation.gotoAndPlayByFrame(e.name,1,e.count).timeScale=Math.random()+1,o.addEventListener(dragonBones.EventObject.FRAME_EVENT,function(e){},this),o.addEventListener(dragonBones.EventObject.COMPLETE,function(){o.parent&&(e.dom?t[e.dom].removeChild(o):t.removeChild(o)),t.isPlayMusic?(t.isPlayAnimate.push(e.name),t.isPlayAnimate.length>=6&&t.subNum.value<=1?(t.subNum.value++,t.isPlayMusic=!1,t.musicFun()):t.isPlayAnimate.length>=6&&t.subNum.value>=2&&(console.log("恭喜通关"),t.isPlayMusic=!1,t.musicFun(),t.gameOver.visible=!0,t.successTween.play(0))):"jiezou1"==e.name?t.animationFun(t.jiezou1):"jiezou2"==e.name?t.animationFun(t.jiezou2):"jiezou3"==e.name?t.animationFun(t.jiezou3):"jiezou4"==e.name?t.animationFun(t.jiezou4):"jiezou5"==e.name?t.animationFun(t.jiezou5):"jiezou6"==e.name&&t.animationFun(t.jiezou6)},this),o},t.prototype.Highlight=function(e,t){var i=6,n=45,s=5701119,r=.7,o=30,a=30,u=3,c=1,l=!1,h=!1,p=new egret.DropShadowFilter(i,n,s,r,o,a,u,c,l,h);t?e.filters=[p]:e.filters=null},t}(eui.Component);__reflect(Index.prototype,"Index",["eui.UIComponent","egret.DisplayObject"]);var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.size=80,this.textField.width=1920,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="正在加载..."+Math.floor(e/t*100)+"%"},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=i.sent(),this.startAnimation(e),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return t=i.sent(),console.log(t),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,this.loadTheme()];case 2:return i.sent(),[4,RES.loadGroup("preload",0,e)];case 3:return i.sent(),this.stage.removeChild(e),[3,5];case 4:return t=i.sent(),console.error(t),[3,5];case 5:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,i){var n=new eui.Theme("resource/default.thm.json",e.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){var e=new Index;this.addChild(e)},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t.prototype.startAnimation=function(e){var t=this,i=new egret.HtmlTextParser,n=e.map(function(e){return i.parse(e)}),s=this.textfield,r=-1,o=function(){r++,r>=n.length&&(r=0);var e=n[r];s.textFlow=e;var i=egret.Tween.get(s);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(o,t)};o()},t.prototype.onButtonClick=function(e){var t=new eui.Panel;t.title="Title",t.horizontalCenter=0,t.verticalCenter=0,this.addChild(t)},t}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function s(e){t.call(n,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(n))}var o=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(n,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,i){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(n,generateEUI2)},o)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var a=e.split("/");a.pop();var u=a.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(n,generateJSON.paths[e])},this):RES.getResByUrl(u,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){t.call(n,generateJSON.paths[e])},o)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(n,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,s,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var cacl=function(e){function t(t,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var s=e.call(this)||this;return s.value=0,s.towValue=0,s.valueArr=[],s.typeArr=[],s.count=0,s.submitNum=0,s.skinName="caclSkin",s.cacl=t,s.caclSkin.x=i,s.caclSkin.y=n,s}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.start()},t.prototype.start=function(){var e=this;this.caclGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.keyDown,this),this.add.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addFun,this),this.minus.addEventListener(egret.TouchEvent.TOUCH_TAP,this.minusFun,this),this.ride.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rideFun,this),this.remove.addEventListener(egret.TouchEvent.TOUCH_TAP,this.removeFun,this),this.ac.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickAC,this),this.submit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.submitFun,this),this.closeCacl.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.cacl.removeChild(e)},this)},t.prototype.keyDown=function(e){"="==this.typeArr[this.typeArr.length-1]&&this.settingValue(),this.sum0.visible=!1;var t=e.target.source.split("_")[0].split("cacl")[1];this.sum.text=parseInt(this.sum.text+t)+"",this.value=parseInt(this.value+t)},t.prototype.settingValue=function(){this.submitNum<1&&(this.value=0,this.submitNum+=1)},t.prototype.addFun=function(){this.computed("+")},t.prototype.minusFun=function(){this.computed("-")},t.prototype.rideFun=function(){this.computed("x")},t.prototype.removeFun=function(){this.computed("÷")},t.prototype.clickAC=function(){this.sum.text="0",this.sum0.text="0",this.sum0.visible=!1,this.value=0,this.count=0,this.typeArr=[]},t.prototype.submitFun=function(){this.computed("="),this.value=parseInt(this.sum0.text),this.submitNum=0,this.count=0},t.prototype.computed=function(e){this.valueArr.push(this.value),this.typeArr.push(e);var t=0,i=parseInt(this.sum0.text);if(console.log("-->",this.count),this.count>=1){switch(this.towValue=this.value,this.typeArr[this.typeArr.length-2]){case"+":t=i+this.towValue;break;case"-":t=i-this.towValue;break;case"x":t=i*this.towValue;break;case"÷":t=i/this.towValue}this.sum0.text=t+""}else console.log("初始化"),this.sum0.text=this.value+"";this.sum.text="",this.sum0.visible=!0,this.value=0,this.count++},t}(eui.Component);__reflect(cacl.prototype,"cacl",["eui.UIComponent","egret.DisplayObject"]);var Value=function(e){function t(t){var i=e.call(this)||this;return i._value=t,i}return __extends(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){if(this._value!=e){this._value=e;var t=new Data(Data.DATA);this.dispatchEvent(t)}},enumerable:!0,configurable:!0}),t}(egret.EventDispatcher);__reflect(Value.prototype,"Value");var Data=function(e){function t(t,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n)||this}return __extends(t,e),t.DATA="valueChang",t}(egret.Event);__reflect(Data.prototype,"Data");var Keyset=function(e){function t(t,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var s=e.call(this)||this;return s.skinName="KeysetSkin",s.cacl=t,s.x=0,s.y=0,s.keySetGroup.x=i,s.keySetGroup.y=n,s}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);for(var t=0;10>t;t++)this["key"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickKeyFun,this);this.cacl.clickLabel.text="",this.keyRevise.addEventListener(egret.TouchEvent.TOUCH_TAP,this.reviseFun,this),this.keyOk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.submitFun,this),this.RectBj.addEventListener(egret.TouchEvent.TOUCH_TAP,this.submitFun,this),this.index=this.cacl.labelGroup.$children.indexOf(this.cacl.clickLabel)},t.prototype.clickKeyFun=function(e){var t=e.target.source.split("_")[0];if(this.cacl.clickLabel.text.length<1){this.cacl.resultNum=t.split("key")[1];var i=this.cacl.showNumGroup.$children;i[this.index].source=t.split("key")[1]+"_png"}},t.prototype.reviseFun=function(e){this.cacl.resultNum=null;var t=this.cacl.showNumGroup.$children;t[this.index].source=""},t.prototype.submitFun=function(e){this.cacl.judgeResult(),this.cacl.removeChild(this)},t}(eui.Component);__reflect(Keyset.prototype,"Keyset",["eui.UIComponent","egret.DisplayObject"]);